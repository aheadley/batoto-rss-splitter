-- DROP TABLE IF EXISTS series;
CREATE TABLE IF NOT EXISTS series (
    id INTEGER PRIMARY KEY ASC AUTOINCREMENT,
    title TEXT NOT NULL
);

-- DROP TABLE IF EXISTS languages;
CREATE TABLE IF NOT EXISTS languages (
    id INTEGER PRIMARY KEY ASC AUTOINCREMENT,
    full_name TEXT,
    short_code TEXT
);

-- DROP TABLE IF EXISTS updates;
CREATE TABLE IF NOT EXISTS updates (
    id INTEGER PRIMARY KEY ASC AUTOINCREMENT,
    series_id INTEGER REFERENCES series (id) ON DELETE CASCADE,
    language_id INTEGER REFERENCES languages (id) ON DELETE CASCADE,
    rss_hash TEXT UNIQUE,
    creation_ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    rss_ts TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    chapter TEXT,
    chapter_title TEXT,
    data TEXT NOT NULL
);
